var Ee=Object.defineProperty,je=Object.defineProperties;var Re=Object.getOwnPropertyDescriptors;var me=Object.getOwnPropertySymbols;var Pe=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable;var ge=(e,t,o)=>t in e?Ee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,se=(e,t)=>{for(var o in t||(t={}))Pe.call(t,o)&&ge(e,o,t[o]);if(me)for(var o of me(t))Te.call(t,o)&&ge(e,o,t[o]);return e},_e=(e,t)=>je(e,Re(t));import{T as he,c as we,w as He}from"./vue.runtime.esm-bundler.ac4ff7af.js";import{u as Fe,a as ke,_ as U,b as Se,g as Ie,c as ce,d as Z,e as de,M as qe,t as We,f as ze,h as Ge,i as Qe,j as ye,l as Je,p as Xe,k as Ke,m as Ye,n as Ze,o as be,q as $e,r as xe,s as et,H as tt}from"./index.133de9ba.entry.js";import{l as le}from"./use-sync.c0f4dfab.js";import{storeToRefs as ue}from"./pinia.256cc3da.entry.js";import{useI18n as z}from"./vue-i18n.ecb0af35.entry.js";import{useRouter as Ce}from"./vue-router.8987d576.entry.js";import{d as B,c as C,r as $,I as ve,f as ee,a as i,n as x,p as T,o as a,b as _,w as s,q as I,e as l,u as E,g as O,F as te,v as A,x as Le,B as M,t as N,H as oe,P as ot,i as q,A as Oe,O as nt,j as at,C as st,G as b,h as rt,y as it,z as lt,J as ut,K as ct}from"./runtime-core.esm-bundler.b1f35d24.js";const dt=B({setup(){const{t:e}=z(),t=Fe(),o=ke(),u=C(()=>{var v;return o.settings===null||!((v=o.settings)!=null&&v.project_logo)?null:Se(Ie()+`assets/${o.settings.project_logo}`)}),d=$(!1),{queueHasItems:c}=ve(t);ee(()=>c.value,v=>{v&&(d.value=!0)});const r=C(()=>{var v;return(v=o.settings)==null?void 0:v.project_url}),n=C(()=>{var v;return(v=o.settings)!=null&&v.project_url?e("view_project"):!1});return{customLogoPath:u,showLoader:d,stopSpinnerIfQueueIsEmpty:p,url:r,urlTooltip:n};function p(){c.value===!1&&(d.value=!1)}}}),vt=["src"];function pt(e,t,o,u,d,c){const r=i("v-progress-linear"),n=x("tooltip");return T((a(),_(Le(e.url?"a":"div"),{href:e.url,target:e.url?"_blank":void 0,rel:e.url?"noopener noreferrer":void 0,class:A(["module-bar-logo",{loading:e.showLoader}])},{default:s(()=>[e.customLogoPath?(a(),I(te,{key:0},[l(he,{name:"fade"},{default:s(()=>[e.showLoader?(a(),_(r,{key:0,indeterminate:"",rounded:"",onAnimationiteration:e.stopSpinnerIfQueueIsEmpty},null,8,["onAnimationiteration"])):E("",!0)]),_:1}),O("img",{class:"custom-logo",src:e.customLogoPath,alt:"Project Logo"},null,8,vt)],64)):(a(),I("div",{key:1,class:A(["logo",{running:e.showLoader}]),onAnimationiteration:t[0]||(t[0]=(...p)=>e.stopSpinnerIfQueueIsEmpty&&e.stopSpinnerIfQueueIsEmpty(...p))},null,34))]),_:1},8,["href","target","rel","class"])),[[n,e.urlTooltip,void 0,{right:!0}]])}var _t=U(dt,[["render",pt],["__scopeId","data-v-a98d38ac"]]);const ft=B({setup(){const{t:e}=z(),t=ce(),o=Z(),{notificationsDrawerOpen:u}=ue(t),{unread:d}=ue(o),c=de(),r=$(!1),n=C(()=>{var w;return!c.currentUser||!("avatar"in c.currentUser)||!((w=c.currentUser)!=null&&w.avatar)?null:Se(Ie()+`assets/${c.currentUser.avatar.id}?key=system-medium-cover`)}),p=$(null),v=C(()=>{var m;return`/users/${(m=c.currentUser)==null?void 0:m.id}`}),y=C(()=>"/logout"),f=c.fullName;return{t:e,userFullName:f,avatarURL:n,userProfileLink:v,signOutActive:r,signOutLink:y,notificationsDrawerOpen:u,unread:d,avatarError:p}}}),mt={class:"module-bar-avatar"},gt=["src","alt"];function yt(e,t,o,u,d,c){const r=i("v-icon"),n=i("v-button"),p=i("v-badge"),v=i("v-card-title"),y=i("v-card-actions"),f=i("v-card"),w=i("v-dialog"),m=i("v-avatar"),P=i("router-link"),D=i("v-hover"),L=x("tooltip");return a(),I("div",mt,[l(p,{value:e.unread,disabled:e.unread==0,class:"notifications-badge"},{default:s(()=>[T((a(),_(n,{tile:"",icon:"","x-large":"",class:"notifications",onClick:t[0]||(t[0]=j=>e.notificationsDrawerOpen=!0)},{default:s(()=>[l(r,{name:"notifications"})]),_:1})),[[L,e.t("notifications"),void 0,{right:!0}]])]),_:1},8,["value","disabled"]),l(D,null,{default:s(({hover:j})=>[l(w,{modelValue:e.signOutActive,"onUpdate:modelValue":t[2]||(t[2]=h=>e.signOutActive=h),onEsc:t[3]||(t[3]=h=>e.signOutActive=!1)},{activator:s(({on:h})=>[l(he,{name:"sign-out"},{default:s(()=>[j?T((a(),_(n,{key:0,tile:"",icon:"","x-large":"",class:"sign-out",onClick:h},{default:s(()=>[l(r,{name:"logout"})]),_:2},1032,["onClick"])),[[L,e.t("sign_out"),void 0,{right:!0}]]):E("",!0)]),_:2},1024)]),default:s(()=>[l(f,null,{default:s(()=>[l(v,null,{default:s(()=>[M(N(e.t("sign_out_confirm")),1)]),_:1}),l(y,null,{default:s(()=>[l(n,{secondary:"",onClick:t[1]||(t[1]=h=>e.signOutActive=!e.signOutActive)},{default:s(()=>[M(N(e.t("cancel")),1)]),_:1}),l(n,{to:e.signOutLink},{default:s(()=>[M(N(e.t("sign_out")),1)]),_:1},8,["to"])]),_:1})]),_:1})]),_:2},1032,["modelValue"]),l(P,{to:e.userProfileLink},{default:s(()=>[T((a(),_(m,{tile:"",large:"",class:A({"no-avatar":!e.avatarURL})},{default:s(()=>[e.avatarURL&&!e.avatarError?(a(),I("img",{key:0,src:e.avatarURL,alt:e.userFullName,class:"avatar-image",onError:t[4]||(t[4]=h=>e.avatarError=h)},null,40,gt)):(a(),_(r,{key:1,name:"account_circle"}))]),_:1},8,["class"])),[[L,e.userFullName,void 0,{right:!0}]])]),_:1},8,["to"])]),_:1})])}var bt=U(ft,[["render",yt],["__scopeId","data-v-0dbe563a"]]);const $t=B({components:{ModuleBarLogo:_t,ModuleBarAvatar:bt},setup(){const e=ke(),{modules:t}=ze(),o=C(()=>t.value.map(d=>d.id));return{modules:C(()=>{var d;return e.settings?((d=e.settings.module_bar)!=null?d:qe).filter(c=>c.type==="link"?!0:c.enabled&&o.value.includes(c.id)).map(c=>{if(c.type==="link"){const n=le.exports.omit(c,["url"]);return c.url.startsWith("/")?n.to=c.url:n.href=c.url,We(n)}const r=t.value.find(n=>n.id===c.id);return _e(se(se({},c),t.value.find(n=>n.id===c.id)),{to:`/${r.id}`})}):[]})}}}),ht={class:"module-bar"},wt={class:"modules"};function kt(e,t,o,u,d,c){const r=i("module-bar-logo"),n=i("v-icon"),p=i("v-button"),v=i("module-bar-avatar"),y=x("tooltip");return a(),I("div",ht,[l(r),O("div",wt,[(a(!0),I(te,null,oe(e.modules,f=>T((a(),_(p,{key:f.id,icon:"","x-large":"",to:f.to,href:f.href,tile:"",style:ot(f.color?{"--v-button-color-active":f.color}:null)},{default:s(()=>[l(n,{name:f.icon},null,8,["name"])]),_:2},1032,["to","href","style"])),[[y,f.name,void 0,{right:!0}]])),128))]),l(v)])}var St=U($t,[["render",kt],["__scopeId","data-v-fc7a189c"]]);const It=B({setup(){const{t:e}=z(),{parsedInfo:t}=Ge(),o=Z(),u=de(),d=C(()=>o.dialogs);return{t:e,notifications:d,admin:u.isAdmin,done:r,getGitHubIssueLink:c};function c(n,p){var y,f,w,m;const v=`<!-- Please put a detailed explanation of the problem here. -->

---

### Project details
Directus Version: ${(y=t.value)==null?void 0:y.directus.version}
Environment: production
OS: ${(f=t.value)==null?void 0:f.os.type} ${(w=t.value)==null?void 0:w.os.version}
Node: ${(m=t.value)==null?void 0:m.node.version}

### Error

Title: ${p.title||"none"}
Message: ${p.text||"none"}

<details>
<summary>Stack Trace</summary>
<pre>
${JSON.stringify(p.error,Object.getOwnPropertyNames(p.error),2)}
</pre>
</details>
			`;return`https://github.com/directus/directus/issues/new?body=${encodeURIComponent(v)}`}function r(n){o.remove(n)}}}),Ct={class:"notification-dialogs"},Lt=["href"];function Ot(e,t,o,u,d,c){const r=i("v-card-title"),n=i("v-error"),p=i("v-card-text"),v=i("v-button"),y=i("v-card-actions"),f=i("v-card"),w=i("v-dialog");return a(),I("div",Ct,[(a(!0),I(te,null,oe(e.notifications,m=>(a(),_(w,{key:m.id,"model-value":!0,persist:""},{default:s(()=>[l(f,{class:A([m.type])},{default:s(()=>[l(r,null,{default:s(()=>[M(N(m.title),1)]),_:2},1024),m.text?(a(),_(p,{key:0},{default:s(()=>[M(N(m.text)+" ",1),m.error?(a(),_(n,{key:0,error:m.error},null,8,["error"])):E("",!0)]),_:2},1024)):E("",!0),l(y,null,{default:s(()=>[m.type==="error"&&e.admin&&m.code==="UNKNOWN"?(a(),_(v,{key:0,secondary:""},{default:s(()=>[O("a",{target:"_blank",href:e.getGitHubIssueLink(m.id,m)},N(e.t("report_error")),9,Lt)]),_:2},1024)):E("",!0),l(v,{onClick:P=>e.done(m.id)},{default:s(()=>[M(N(e.t("dismiss")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024))),128))])}var Vt=U(It,[["render",Ot],["__scopeId","data-v-bb61b36a"]]);const Nt=B({props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e){const{t}=z(),o=ce(),u=de(),d=Z(),c=Qe(),r=Ce(),n=$([]),p=$(0),v=$(!1),y=$(null),f=$([]),w=$(["inbox"]),{notificationsDrawerOpen:m}=ue(o),P=$([{text:t("subject"),value:"subject",sortable:!1,width:300,align:"left"},{text:t("timestamp"),value:"timestampDistance",sortable:!1,width:180,align:"left"}]);return D(),ee([()=>e.modelValue,w],()=>D()),{tableHeaders:P,t,notificationsDrawerOpen:m,page:p,notifications:n,loading:v,error:y,selection:f,onRowClick:j,toggleArchive:L,tab:w};async function D(){v.value=!0;try{const h=await ye.get("/notifications",{params:{filter:{_and:[{recipient:{_eq:u.currentUser.id}},{status:{_eq:w.value[0]}}]},fields:["id","subject","collection","item","timestamp"],sort:["-timestamp"]}});await d.getUnreadCount();const H=h.data.data,F=[];for(const G of H)F.push(_e(se({},G),{timestampDistance:await Je(Xe(G.timestamp),new Date,{addSuffix:!0})}));n.value=F}catch(h){y.value=h}finally{v.value=!1}}async function L(){await ye.patch("/notifications",{keys:f.value.map(({id:h})=>h),data:{status:w.value[0]==="inbox"?"archived":"inbox"}}),await D(),f.value=[]}function j({item:h}){var F;const H=c.getCollection(h.collection);(F=H==null?void 0:H.meta)!=null&&F.singleton?r.push(`/content/${h.collection}`):r.push(`/content/${h.collection}/${h.item}`),m.value=!1}}});function Dt(e,t,o,u,d,c){const r=i("v-icon"),n=i("v-button"),p=i("v-list-item-icon"),v=i("v-list-item-content"),y=i("v-tab"),f=i("v-tabs"),w=i("v-info"),m=i("v-table"),P=i("v-drawer"),D=x("tooltip");return a(),_(P,{modelValue:e.notificationsDrawerOpen,"onUpdate:modelValue":t[3]||(t[3]=L=>e.notificationsDrawerOpen=L),icon:"notifications",title:e.t("notifications"),onCancel:t[4]||(t[4]=L=>e.notificationsDrawerOpen=!1)},{actions:s(()=>[T((a(),_(n,{icon:"",rounded:"",disabled:e.selection.length===0,secondary:"",onClick:e.toggleArchive},{default:s(()=>[l(r,{name:e.tab[0]==="inbox"?"archive":"move_to_inbox"},null,8,["name"])]),_:1},8,["disabled","onClick"])),[[D,e.tab[0]==="inbox"?e.t("archive"):e.t("unarchive"),void 0,{bottom:!0}]])]),sidebar:s(()=>[l(f,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=L=>e.tab=L),vertical:""},{default:s(()=>[l(y,{value:"inbox"},{default:s(()=>[l(p,null,{default:s(()=>[l(r,{name:"inbox"})]),_:1}),l(v,null,{default:s(()=>[M(N(e.t("inbox")),1)]),_:1})]),_:1}),l(y,{value:"archived"},{default:s(()=>[l(p,null,{default:s(()=>[l(r,{name:"archive"})]),_:1}),l(v,null,{default:s(()=>[M(N(e.t("archive")),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),default:s(()=>[!e.loading&&e.notifications.length===0?(a(),_(w,{key:0,icon:"notifications",title:e.t("no_notifications"),center:""},{default:s(()=>[M(N(e.t("no_notifications_copy")),1)]),_:1},8,["title"])):(a(),_(m,{key:1,modelValue:e.selection,"onUpdate:modelValue":t[1]||(t[1]=L=>e.selection=L),headers:e.tableHeaders,"onUpdate:headers":t[2]||(t[2]=L=>e.tableHeaders=L),"show-select":"",loading:e.loading,items:e.notifications,"item-key":"id","onClick:row":e.onRowClick},null,8,["modelValue","headers","loading","items","onClick:row"]))]),_:1},8,["modelValue","title"])}var Mt=U(Nt,[["render",Dt],["__scopeId","data-v-2e8d7f71"]]);const Ut=B({props:{id:{type:String,required:!0},title:{type:String,required:!0},text:{type:String,default:null},icon:{type:String,default:null},type:{type:String,default:"info",validator:e=>["info","success","warning","error"].includes(e)},tail:{type:Boolean,default:!1},dense:{type:Boolean,default:!1},showClose:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},progress:{type:Number,default:void 0}},setup(e){const t=Z();return{close:o};function o(){e.showClose===!0&&t.remove(e.id)}}}),Bt={key:0,class:"icon"},At={class:"content"},Et={class:"title selectable"},jt={key:0,class:"text selectable"};function Rt(e,t,o,u,d,c){const r=i("v-progress-circular"),n=i("v-icon");return a(),I("div",{class:A(["notification-item",[e.type,{tail:e.tail,dense:e.dense}]]),onClick:t[0]||(t[0]=(...p)=>e.close&&e.close(...p))},[e.loading||e.progress||e.icon?(a(),I("div",Bt,[e.loading?(a(),_(r,{key:0,indeterminate:"",small:""})):e.progress?(a(),_(r,{key:1,small:"",value:e.progress},null,8,["value"])):(a(),_(n,{key:2,name:e.icon},null,8,["name"]))])):E("",!0),O("div",At,[O("p",Et,N(e.title),1),e.text?(a(),I("p",jt,N(e.text),1)):E("",!0)]),e.showClose?(a(),_(n,{key:1,name:"close",clickable:"",class:"close",onClick:e.close},null,8,["onClick"])):E("",!0)],2)}var Ve=U(Ut,[["render",Rt],["__scopeId","data-v-43553e80"]]);const Pt=B({components:{NotificationItem:Ve},props:{sidebarOpen:{type:Boolean,default:!1}},setup(){const e=Z();return{queue:ve(e).queue}}});function Tt(e,t,o,u,d,c){const r=i("notification-item");return a(),_(we,{class:A(["notifications-group",{"sidebar-open":e.sidebarOpen}]),name:"slide-fade",tag:"div"},{default:s(()=>[q(e.$slots,"default",{},void 0,!0),(a(!0),I(te,null,oe(e.queue,(n,p)=>(a(),_(r,Oe({key:n.id},n,{tail:p===e.queue.length-1,dense:e.sidebarOpen===!1,"show-close":n.persist===!0&&n.closeable!==!1}),null,16,["tail","dense","show-close"]))),128))]),_:3},8,["class"])}var Ht=U(Pt,[["render",Tt],["__scopeId","data-v-509bd4b0"]]);const Ft=B({props:{to:{type:String,default:null},icon:{type:String,default:"box"},active:{type:Boolean,default:!1}},emits:["click"],setup(){const e=ce(),{sidebarOpen:t}=ve(e);return{sidebarOpen:t}}}),qt={class:"icon"},Wt={key:0,class:"title"};function zt(e,t,o,u,d,c){const r=i("v-icon");return a(),_(Le(e.to?"router-link":"button"),{class:A(["sidebar-button",{active:e.active}]),onClick:t[0]||(t[0]=n=>e.$emit("click",n))},{default:s(()=>[O("div",qt,[l(r,{name:e.icon},null,8,["name"])]),e.sidebarOpen?(a(),I("div",Wt,[q(e.$slots,"default",{},void 0,!0)])):E("",!0)]),_:3},8,["class"])}var Gt=U(Ft,[["render",zt],["__scopeId","data-v-a8c828a4"]]);const Qt=B({components:{SidebarButton:Gt,NotificationItem:Ve},props:{sidebarOpen:{type:Boolean,default:!1},modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(){const{t:e}=z(),t=Z();return{t:e,lastFour:t.lastFour}}}),Jt={class:"notifications-preview"},Xt={key:0,class:"inline"},Kt={class:"padding-box"};function Yt(e,t,o,u,d,c){const r=i("router-link"),n=i("notification-item"),p=i("transition-expand"),v=i("sidebar-button"),y=x("tooltip");return a(),I("div",Jt,[l(p,{tag:"div"},{default:s(()=>[e.modelValue?(a(),I("div",Xt,[O("div",Kt,[l(r,{class:A(["link",{"has-items":e.lastFour.length>0}]),to:"/activity"},{default:s(()=>[M(N(e.t("show_all_activity")),1)]),_:1},8,["class"]),l(we,{tag:"div",name:"notification",class:"transition"},{default:s(()=>[(a(!0),I(te,null,oe(e.lastFour,f=>(a(),_(n,Oe({key:f.id},f),null,16))),128))]),_:1})])])):E("",!0)]),_:1}),T((a(),_(v,{active:e.modelValue,class:"toggle",icon:"pending_actions",onClick:t[0]||(t[0]=f=>e.$emit("update:modelValue",!e.modelValue))},{default:s(()=>[M(N(e.t("activity_log")),1)]),_:1},8,["active"])),[[y,e.t("activity_log"),void 0,{left:!0}]])])}var Zt=U(Qt,[["render",Yt],["__scopeId","data-v-415ab206"]]),X=1e3,K=X*60,Y=K*60,W=Y*24,xt=W*7,eo=W*365.25,re=function(e,t){t=t||{};var o=typeof e;if(o==="string"&&e.length>0)return to(e);if(o==="number"&&isFinite(e))return t.long?no(e):oo(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function to(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!!t){var o=parseFloat(t[1]),u=(t[2]||"ms").toLowerCase();switch(u){case"years":case"year":case"yrs":case"yr":case"y":return o*eo;case"weeks":case"week":case"w":return o*xt;case"days":case"day":case"d":return o*W;case"hours":case"hour":case"hrs":case"hr":case"h":return o*Y;case"minutes":case"minute":case"mins":case"min":case"m":return o*K;case"seconds":case"second":case"secs":case"sec":case"s":return o*X;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}function oo(e){var t=Math.abs(e);return t>=W?Math.round(e/W)+"d":t>=Y?Math.round(e/Y)+"h":t>=K?Math.round(e/K)+"m":t>=X?Math.round(e/X)+"s":e+"ms"}function no(e){var t=Math.abs(e);return t>=W?ie(e,t,W,"day"):t>=Y?ie(e,t,Y,"hour"):t>=K?ie(e,t,K,"minute"):t>=X?ie(e,t,X,"second"):e+" ms"}function ie(e,t,o,u){var d=t>=o*1.5;return Math.round(e/o)+" "+u+(d?"s":"")}const ao=B({setup(){const{t:e}=z(),t=Ke(),o=C(()=>{const n=le.exports.sortBy(t.latency,["timestamp"]);return n[n.length-1]}),u=C(()=>{if(!t.latency||t.latency.length===0)return 0;const n=le.exports.sortBy(t.latency,["timestamp"]),p=n.slice(Math.max(n.length-5,0));let v=0;for(const{latency:y}of p)v+=y;return Math.round(v/p.length)}),d=C(()=>u.value<=250?4:u.value>250&&u.value<=500?3:u.value>500&&u.value<=750?2:1),c=C(()=>{switch(d.value){case 4:return`${e("connection_excellent")}
(${re(u.value)} ${e("latency")})`;case 3:return`${e("connection_good")}
(${re(u.value)} ${e("latency")})`;case 2:return`${e("connection_fair")}
(${re(u.value)} ${e("latency")})`;case 1:return`${e("connection_poor")}
(${re(u.value)} ${e("latency")})`;default:return null}});return{icon:C(()=>{switch(d.value){case 4:return"signal_wifi_4_bar";case 3:return"signal_wifi_3_bar";case 2:return"signal_wifi_2_bar";case 1:return"signal_wifi_1_bar";default:return null}}),lastLatency:o,latencyTooltip:c}}}),so={class:"latency-indicator"};function ro(e,t,o,u,d,c){const r=i("v-progress-circular"),n=i("v-icon"),p=x("tooltip");return T((a(),I("div",so,[e.lastLatency?(a(),_(n,{key:1,name:e.icon},null,8,["name"])):(a(),_(r,{key:0,indeterminate:""}))])),[[p,e.latencyTooltip,void 0,{bottom:!0,end:!0}]])}var io=U(ao,[["render",ro],["__scopeId","data-v-2cfd5c8b"]]);const lo=B({components:{LatencyIndicator:io},setup(){const e=Ye(),t=C(()=>{var u,d;return(d=(u=e.info)==null?void 0:u.project)==null?void 0:d.project_name}),o=C(()=>{var u,d;return(d=(u=e.info)==null?void 0:u.project)==null?void 0:d.project_descriptor});return{name:t,descriptor:o}}}),uo={class:"project-info"},co={class:"name-container"};function vo(e,t,o,u,d,c){const r=i("latency-indicator"),n=i("v-text-overflow");return a(),I("div",uo,[l(r),O("div",co,[l(n,{placement:"right",class:"name",text:e.name},null,8,["text"]),e.descriptor?(a(),_(n,{key:0,placement:"right",class:"descriptor",text:e.descriptor},null,8,["text"])):E("",!0)])])}var po=U(lo,[["render",vo],["__scopeId","data-v-47e3c683"]]);const _o=B({props:{sidebarOpen:{type:Boolean,default:!1}},setup(e){const t=$([]),o=$(!1);return ee(()=>e.sidebarOpen,async u=>{u===!1?t.value=[]:(o.value=!0,await nt(),o.value=!1)}),{openDetail:t,mandatory:o}}});function fo(e,t,o,u,d,c){const r=i("v-item-group");return a(),_(r,{modelValue:e.openDetail,"onUpdate:modelValue":t[0]||(t[0]=n=>e.openDetail=n),class:"sidebar-detail-group",scope:"sidebar-detail",mandatory:e.mandatory},{default:s(()=>[q(e.$slots,"default",{},void 0,!0)]),_:3},8,["modelValue","mandatory"])}var mo=U(_o,[["render",fo],["__scopeId","data-v-ebb6371e"]]);const go=e=>(ut("data-v-d547d406"),e=e(),ct(),e),yo={class:"module-nav-content"},bo={class:"flex-container"},$o=go(()=>O("div",{class:"spacer"},null,-1)),ho=B({name:"private-view",props:{title:{default:null},smallHeader:{type:Boolean,default:!1}},setup(e){const t=e,{t:o}=z(),u=Ce(),d=$(),c=$(),{width:r}=Ze(),{width:n}=be(d),{width:p}=be(c),v=$(),{handleHover:y,onResizeHandlePointerDown:f,resetModuleNavWidth:w,onPointerMove:m,onPointerUp:P}=De();$e(window,"pointermove",m),$e(window,"pointerup",P);const{data:D}=xe("module-nav-width");at(()=>{!D.value||Number.isNaN(D.value)||(v.value.style.width=`${D.value}px`)});const{title:L}=ve(t),j=$(!1),h=de(),H=ce(),F=C(()=>{var S,g;return h.currentUser?((g=(S=h.currentUser)==null?void 0:S.role)==null?void 0:g.app_access)||!1:!0}),G=$(!1),{sidebarOpen:R,fullScreen:fe}=ue(H),Ne=C(()=>{var S;return((S=h.currentUser)==null?void 0:S.theme)||"auto"});st("main-element",d),u.afterEach(async()=>{var S;(S=d.value)==null||S.scrollTo({top:0}),fe.value=!1}),et(L);function De(){const S=$(!1),g=$(!1),ne=$(0),ae=$(0),V=$(null),k=$(0),Q=$(null);return ee(V,le.exports.debounce(J=>{J===220?D.value=null:D.value=J},300)),ee([r,n,p],()=>{r.value>1260?k.value=r.value-(590+60+p.value):r.value>960?k.value=r.value-(590+60+60):k.value=r.value-(60+60),V.value&&V.value>k.value&&(V.value=Math.max(220,k.value),v.value.style.width=`${V.value}px`)},{immediate:!0}),{handleHover:S,onResizeHandlePointerDown:pe,resetModuleNavWidth:Ue,onPointerMove:Be,onPointerUp:Ae};function pe(J){g.value=!0,ne.value=J.pageX,ae.value=v.value.offsetWidth}function Ue(){V.value=220,v.value.style.width="220px"}function Be(J){!g.value||(Q.value=window.requestAnimationFrame(()=>{V.value=Math.max(220,ae.value+(J.pageX-ne.value)),V.value>=k.value&&(V.value=k.value),V.value>220&&V.value<=230&&(V.value=220),v.value.style.width=`${V.value}px`}))}function Ae(){g.value===!0&&(g.value=!1,Q.value&&window.cancelAnimationFrame(Q.value))}}function Me(S){S.target&&S.target.classList.contains("close")===!1&&(R.value=!0)}return(S,g)=>{const ne=i("v-button"),ae=i("v-info"),V=i("v-overlay");return b(F)===!1?(a(),_(ae,{key:0,center:"",title:b(o)("no_app_access"),type:"danger",icon:"block"},{append:s(()=>[l(ne,{to:"/logout"},{default:s(()=>[M(N(b(o)("switch_user")),1)]),_:1})]),default:s(()=>[M(N(b(o)("no_app_access_copy"))+" ",1)]),_:1},8,["title"])):(a(),I("div",{key:1,class:A(["private-view",{theme:b(Ne),"full-screen":b(fe)}])},[O("aside",{id:"navigation",role:"navigation","aria-label":"Module Navigation",class:A({"is-open":j.value})},[l(St),O("div",{ref_key:"moduleNavEl",ref:v,class:"module-nav alt-colors"},[l(b(po)),O("div",yo,[q(S.$slots,"navigation",{},void 0,!0)]),O("div",{class:A(["module-nav-resize-handle",{active:b(y)}]),onPointerenter:g[0]||(g[0]=k=>y.value=!0),onPointerleave:g[1]||(g[1]=k=>y.value=!1),onPointerdown:g[2]||(g[2]=He((...k)=>b(f)&&b(f)(...k),["self"])),onDblclick:g[3]||(g[3]=(...k)=>b(w)&&b(w)(...k))},null,34)],512)],2),O("div",{id:"main-content",ref_key:"contentEl",ref:d,class:"content"},[l(b(tt),{small:e.smallHeader,"show-sidebar-toggle":"",title:b(L),"onToggle:sidebar":g[4]||(g[4]=k=>R.value=!b(R)),onPrimary:g[5]||(g[5]=k=>j.value=!j.value)},rt({_:2},[oe(S.$slots,(k,Q)=>({name:Q,fn:s(pe=>[q(S.$slots,Q,it(lt(pe)),void 0,!0)])}))]),1032,["small","title"]),O("main",null,[q(S.$slots,"default",{},void 0,!0)])],512),O("aside",{id:"sidebar",ref_key:"sidebarEl",ref:c,role:"contentinfo",class:A(["alt-colors",{"is-open":b(R)}]),"aria-label":"Module Sidebar",onClick:Me},[O("div",bo,[l(b(mo),{"sidebar-open":b(R)},{default:s(()=>[q(S.$slots,"sidebar",{},void 0,!0)]),_:3},8,["sidebar-open"]),$o,l(b(Zt),{modelValue:G.value,"onUpdate:modelValue":g[6]||(g[6]=k=>G.value=k),"sidebar-open":b(R)},null,8,["modelValue","sidebar-open"])])],2),l(V,{class:"nav-overlay",active:j.value,onClick:g[7]||(g[7]=k=>j.value=!1)},null,8,["active"]),l(V,{class:"sidebar-overlay",active:b(R),onClick:g[8]||(g[8]=k=>R.value=!1)},null,8,["active"]),l(Mt),G.value===!1?(a(),_(b(Ht),{key:0,"sidebar-open":b(R)},null,8,["sidebar-open"])):E("",!0),l(b(Vt))],2))}}});var No=U(ho,[["__scopeId","data-v-d547d406"]]);export{No as PrivateView,No as default};
