import{a,o as i,b as c,w as l,g as e,e as h,B as s}from"./runtime-core.esm-bundler.b1f35d24.js";var t={};const d={class:"markdown-body"},p={class:"two-up"},u={class:"left"},_=s("What data is linked to what other data. Allows you to assign authors to articles, products to sales, and whatever other structures you can think of. "),g=s("Learn more about Relationships"),f=s("."),m=e("div",{class:"right"},[e("p",null,[e("div",{class:"table-of-contents"},[e("ul",null,[e("li",null,[e("a",{href:"#the-relation-object"},"The Relation Object")]),e("li",null,[e("a",{href:"#list-relations"},"List relations")]),e("li",null,[e("a",{href:"#list-relations-in-collection"},"List relations in collection")]),e("li",null,[e("a",{href:"#retrieve-a-relation"},"Retrieve a relation")]),e("li",null,[e("a",{href:"#create-a-relation"},"Create a Relation")]),e("li",null,[e("a",{href:"#update-a-relation"},"Update a Relation")]),e("li",null,[e("a",{href:"#delete-a-relation"},"Delete a Relation")])])])])],-1),y=e("hr",null,null,-1),j=e("h2",{id:"the-relation-object"},[s("The Relation Object "),e("a",{class:"header-anchor",href:"#the-relation-object"},"#")],-1),b=e("div",{class:"two-up"},[e("div",{class:"left"},[e("div",{class:"definitions"},[e("p",null,[e("code",{class:""},"collection"),s(),e("strong",null,"string"),e("br"),s(" Name of the collection. This matches the table name in the database.")]),e("p",null,[e("code",{class:""},"field"),s(),e("strong",null,"string"),e("br"),s(" Name of the field that holds the related primary key. This matches the column name in the database.")]),e("p",null,[e("code",{class:""},"related_collection"),s(),e("strong",null,"string"),e("br"),s(" Name of the related collection. This matches the table name in the database.")])]),e("h4",{id:"meta"},[s("Meta "),e("a",{class:"header-anchor",href:"#meta"},"#")]),e("p",null,"Directus metadata. Used to enable non-database relationship types"),e("div",{class:"definitions"},[e("p",null,[e("code",{class:""},"id"),s(),e("strong",null,"integer"),e("br"),s(" Primary key of the metadata row in "),e("code",{class:""},"directus_relations"),s(".")]),e("p",null,[e("code",{class:""},"many_collection"),s(),e("strong",null,"string"),e("br"),s(" Name of the collection. Matches the top level "),e("code",{class:""},"collection"),s(" field.")]),e("p",null,[e("code",{class:""},"many_field"),s(),e("strong",null,"string"),e("br"),s(" Name of the field. Matches the top level "),e("code",{class:""},"field"),s(" field.")]),e("p",null,[e("code",{class:""},"one_collection"),s(),e("strong",null,"string"),e("br"),s(" Name of the related collection. Matches the top level "),e("code",{class:""},"related_collection"),s(" field.")]),e("p",null,[e("code",{class:""},"one_field"),s(),e("strong",null,"string"),e("br"),s(" Name of the one to many field on the other side of the relation.")]),e("p",null,[e("code",{class:""},"one_allowed_collections"),s(),e("strong",null,"string"),e("br"),s(" What collections are allowed to be used in a many-to-any context.")]),e("p",null,[e("code",{class:""},"one_collection_field"),s(),e("strong",null,"string"),e("br"),s(" Field that holds the collection name in a many-to-any context.")]),e("p",null,[e("code",{class:""},"one_deselect_action"),s(),e("strong",null,"nullify | delete"),e("br"),s(" Whether to nullify or delete related one-to-many records.")]),e("p",null,[e("code",{class:""},"sort_field"),s(),e("strong",null,"string"),e("br"),s(" What field is used to hold the sort field.")]),e("p",null,[e("code",{class:""},"junction_field"),s(),e("strong",null,"string"),e("br"),s(" What field connects two relations in a many-to-many (o2m-m2o) context.")])]),e("h4",{id:"schema"},[s("Schema "),e("a",{class:"header-anchor",href:"#schema"},"#")]),e("p",null,"\u201CRaw\u201D database information. Based on the database vendor used, different information might be returned. The following are available for all drivers."),e("div",{class:"definitions"},[e("p",null,[e("code",{class:""},"table"),s(),e("strong",null,"string"),e("br"),s(" The table name.")]),e("p",null,[e("code",{class:""},"column"),s(),e("strong",null,"string"),e("br"),s(" The column name.")]),e("p",null,[e("code",{class:""},"foreign_key_table"),s(),e("strong",null,"string"),e("br"),s(" Related table name.")]),e("p",null,[e("code",{class:""},"foreign_key_column"),s(),e("strong",null,"string"),e("br"),s(" Related column name.")]),e("p",null,[e("code",{class:""},"constraint_name"),s(),e("strong",null,"string"),e("br"),s(" Name for the foreign key constraint.")]),e("p",null,[e("code",{class:""},"on_update"),s(),e("strong",null,"string"),e("br"),s(" Update trigger for the foreign key constraint.")]),e("p",null,[e("code",{class:""},"on_delete"),s(),e("strong",null,"string"),e("br"),s(" Delete trigger for the foreign key constraint.")])])]),e("div",{class:"right"},[e("pre",null,[e("code",{class:"language-json"},[s(`{
	`),e("span",{class:"hljs-attr"},'"collection"'),s(": "),e("span",{class:"hljs-string"},'"about_us"'),s(`,
	`),e("span",{class:"hljs-attr"},'"field"'),s(": "),e("span",{class:"hljs-string"},'"logo"'),s(`,
	`),e("span",{class:"hljs-attr"},'"related_collection"'),s(": "),e("span",{class:"hljs-string"},'"directus_files"'),s(`,
	`),e("span",{class:"hljs-attr"},'"schema"'),s(`: {
		`),e("span",{class:"hljs-attr"},'"table"'),s(": "),e("span",{class:"hljs-string"},'"about_us"'),s(`,
		`),e("span",{class:"hljs-attr"},'"column"'),s(": "),e("span",{class:"hljs-string"},'"logo"'),s(`,
		`),e("span",{class:"hljs-attr"},'"foreign_key_table"'),s(": "),e("span",{class:"hljs-string"},'"directus_files"'),s(`,
		`),e("span",{class:"hljs-attr"},'"foreign_key_column"'),s(": "),e("span",{class:"hljs-string"},'"id"'),s(`,
		`),e("span",{class:"hljs-attr"},'"constraint_name"'),s(": "),e("span",{class:"hljs-string"},'"about_us_logo_foreign"'),s(`,
		`),e("span",{class:"hljs-attr"},'"on_update"'),s(": "),e("span",{class:"hljs-string"},'"NO ACTION"'),s(`,
		`),e("span",{class:"hljs-attr"},'"on_delete"'),s(": "),e("span",{class:"hljs-string"},'"SET NULL"'),s(`
	},
	`),e("span",{class:"hljs-attr"},'"meta"'),s(`: {
		`),e("span",{class:"hljs-attr"},'"id"'),s(": "),e("span",{class:"hljs-number"},"1"),s(`,
		`),e("span",{class:"hljs-attr"},'"junction_field"'),s(": "),e("span",{class:"hljs-literal"},"null"),s(`,
		`),e("span",{class:"hljs-attr"},'"many_collection"'),s(": "),e("span",{class:"hljs-string"},'"about_us"'),s(`,
		`),e("span",{class:"hljs-attr"},'"many_field"'),s(": "),e("span",{class:"hljs-string"},'"logo"'),s(`,
		`),e("span",{class:"hljs-attr"},'"one_allowed_collections"'),s(": "),e("span",{class:"hljs-literal"},"null"),s(`,
		`),e("span",{class:"hljs-attr"},'"one_collection"'),s(": "),e("span",{class:"hljs-string"},'"directus_files"'),s(`,
		`),e("span",{class:"hljs-attr"},'"one_collection_field"'),s(": "),e("span",{class:"hljs-literal"},"null"),s(`,
		`),e("span",{class:"hljs-attr"},'"one_deselect_action"'),s(": "),e("span",{class:"hljs-string"},'"nullify"'),s(`,
		`),e("span",{class:"hljs-attr"},'"one_field"'),s(": "),e("span",{class:"hljs-literal"},"null"),s(`,
		`),e("span",{class:"hljs-attr"},'"sort_field"'),s(": "),e("span",{class:"hljs-literal"},"null"),s(`
	}
}
`)])])])],-1),q=e("hr",null,null,-1),v=e("h2",{id:"list-relations"},[s("List relations "),e("a",{class:"header-anchor",href:"#list-relations"},"#")],-1),x=e("p",null,"List all relations that exist in Directus.",-1),w=e("div",{class:"two-up"},[e("div",{class:"left"},[e("div",{class:"tip hint"},[e("div",{class:"hint-title"},"Permissions"),e("p",null,"The data returned in this endpoint will be filtered based on the user\u2019s permissions. For example, relations that apply to a collection that the current user doesn\u2019t have access to are stripped out.")]),e("h3",{id:"query-parameters"},[s("Query Parameters "),e("a",{class:"header-anchor",href:"#query-parameters"},"#")]),e("p",null,"Doesn\u2019t support any query parameters."),e("h3",{id:"returns"},[s("Returns "),e("a",{class:"header-anchor",href:"#returns"},"#")]),e("p",null,[s("Array of "),e("a",{href:"#the-relation-object"},"relation objects"),s(". If no items are available, data will be an empty array.")])]),e("div",{class:"right"},[e("h3",{id:"rest-api"},[s("REST API "),e("a",{class:"header-anchor",href:"#rest-api"},"#")]),e("pre",null,[e("code",{class:""},`GET /relations
`)]),e("h3",{id:"graphql"},[s("GraphQL "),e("a",{class:"header-anchor",href:"#graphql"},"#")]),e("pre",null,[e("code",{class:""},`POST /graphql/system
`)]),e("pre",null,[e("code",{class:"language-graphql"},[e("span",{class:"hljs-keyword"},"type"),e("span",{class:"hljs-type"}," Query"),s(` {
	relations: [directus_relations]
}
`)])]),e("h5",{id:"example"},[s("Example "),e("a",{class:"header-anchor",href:"#example"},"#")]),e("pre",null,[e("code",{class:"language-graphql"},[e("span",{class:"hljs-keyword"},"query"),s(` {
	relations {
		collection
		field
	}
}
`)])])])],-1),T=e("hr",null,null,-1),R=e("h2",{id:"list-relations-in-collection"},[s("List relations in collection "),e("a",{class:"header-anchor",href:"#list-relations-in-collection"},"#")],-1),E=e("p",null,"List all relations that exist in a given collection.",-1),k=e("div",{class:"two-up"},[e("div",{class:"left"},[e("div",{class:"tip hint"},[e("div",{class:"hint-title"},"Permissions"),e("p",null,"The data returned in this endpoint will be filtered based on the user\u2019s permissions. For example, relations that apply to a collection that the current user doesn\u2019t have access to are stripped out.")]),e("h3",{id:"query-parameters-2"},[s("Query Parameters "),e("a",{class:"header-anchor",href:"#query-parameters-2"},"#")]),e("p",null,"Doesn\u2019t support any query parameters."),e("h3",{id:"returns-2"},[s("Returns "),e("a",{class:"header-anchor",href:"#returns-2"},"#")]),e("p",null,[s("Array of "),e("a",{href:"#the-relation-object"},"relation objects"),s(". If no items are available, data will be an empty array.")])]),e("div",{class:"right"},[e("h3",{id:"rest-api-2"},[s("REST API "),e("a",{class:"header-anchor",href:"#rest-api-2"},"#")]),e("pre",null,[e("code",{class:""},`GET /relations/:collection
`)]),e("h5",{id:"example-2"},[s("Example "),e("a",{class:"header-anchor",href:"#example-2"},"#")]),e("pre",null,[e("code",{class:""},`GET /relations/articles
`)]),e("h3",{id:"graphql-2"},[s("GraphQL "),e("a",{class:"header-anchor",href:"#graphql-2"},"#")]),e("pre",null,[e("code",{class:""},`POST /graphql/system
`)]),e("pre",null,[e("code",{class:"language-graphql"},[e("span",{class:"hljs-keyword"},"type"),e("span",{class:"hljs-type"}," Query"),s(` {
	relations_in_collection(collection:`),e("span",{class:"hljs-type"}," String"),s(`!): [directus_relations]
}
`)])]),e("h5",{id:"example-3"},[s("Example "),e("a",{class:"header-anchor",href:"#example-3"},"#")]),e("pre",null,[e("code",{class:"language-graphql"},[e("span",{class:"hljs-keyword"},"query"),s(` {
	relations_in_collection(collection: `),e("span",{class:"hljs-string"},'"articles"'),s(`) {
		collection
		field
	}
}
`)])])])],-1),P=e("hr",null,null,-1),S=e("h2",{id:"retrieve-a-relation"},[s("Retrieve a relation "),e("a",{class:"header-anchor",href:"#retrieve-a-relation"},"#")],-1),L=e("p",null,"List an existing relation by collection/field name.",-1),A=e("div",{class:"two-up"},[e("div",{class:"left"},[e("h3",{id:"query-parameters-3"},[s("Query Parameters "),e("a",{class:"header-anchor",href:"#query-parameters-3"},"#")]),e("p",null,"Doesn\u2019t support any query parameters."),e("h3",{id:"returns-3"},[s("Returns "),e("a",{class:"header-anchor",href:"#returns-3"},"#")]),e("p",null,[s("Returns the requested "),e("a",{href:"#the-relation-object"},"relation object"),s(".")])]),e("div",{class:"right"},[e("h3",{id:"rest-api-3"},[s("REST API "),e("a",{class:"header-anchor",href:"#rest-api-3"},"#")]),e("pre",null,[e("code",{class:""},`GET /relations/:collection/:field
`)]),e("h5",{id:"example-4"},[s("Example "),e("a",{class:"header-anchor",href:"#example-4"},"#")]),e("pre",null,[e("code",{class:""},`GET /relations/articles/featured_image
`)]),e("h3",{id:"graphql-3"},[s("GraphQL "),e("a",{class:"header-anchor",href:"#graphql-3"},"#")]),e("pre",null,[e("code",{class:""},`POST /graphql/system
`)]),e("pre",null,[e("code",{class:"language-graphql"},[e("span",{class:"hljs-keyword"},"type"),e("span",{class:"hljs-type"}," Query"),s(` {
	relations_by_name(collection:`),e("span",{class:"hljs-type"}," String"),s("!, field:"),e("span",{class:"hljs-type"}," String"),s(`!): directus_relations
}
`)])]),e("h5",{id:"example-5"},[s("Example "),e("a",{class:"header-anchor",href:"#example-5"},"#")]),e("pre",null,[e("code",{class:"language-graphql"},[e("span",{class:"hljs-keyword"},"query"),s(` {
	relations_by_name(collection: `),e("span",{class:"hljs-string"},'"articles"'),s(", field: "),e("span",{class:"hljs-string"},'"featured_image"'),s(`) {
		collection
		field
		related_collection
	}
}
`)])])])],-1),N=e("hr",null,null,-1),Q=e("h2",{id:"create-a-relation"},[s("Create a Relation "),e("a",{class:"header-anchor",href:"#create-a-relation"},"#")],-1),D=e("p",null,"Create a new relation.",-1),O=e("div",{class:"two-up"},[e("div",{class:"left"},[e("h3",{id:"query-parameters-4"},[s("Query Parameters "),e("a",{class:"header-anchor",href:"#query-parameters-4"},"#")]),e("p",null,"Doesn\u2019t support any query parameters."),e("h3",{id:"request-body"},[s("Request Body "),e("a",{class:"header-anchor",href:"#request-body"},"#")]),e("p",null,[s("A partial "),e("a",{href:"#the-relation-object"},"relation object"),s(".")]),e("h3",{id:"returns-4"},[s("Returns "),e("a",{class:"header-anchor",href:"#returns-4"},"#")]),e("p",null,[s("Returns the "),e("a",{href:"#the-relation-object"},"relation object"),s(" for the created relation.")])]),e("div",{class:"right"},[e("h3",{id:"rest-api-4"},[s("REST API "),e("a",{class:"header-anchor",href:"#rest-api-4"},"#")]),e("pre",null,[e("code",{class:""},`POST /relations
`)]),e("h5",{id:"example-6"},[s("Example "),e("a",{class:"header-anchor",href:"#example-6"},"#")]),e("pre",null,[e("code",{class:"language-json"},[e("span",{class:"hljs-comment"},"// POST /relations"),s(`

{
	`),e("span",{class:"hljs-attr"},'"collection"'),s(": "),e("span",{class:"hljs-string"},'"articles"'),s(`,
	`),e("span",{class:"hljs-attr"},'"field"'),s(": "),e("span",{class:"hljs-string"},'"featured_image"'),s(`,
	`),e("span",{class:"hljs-attr"},'"related_collection"'),s(": "),e("span",{class:"hljs-string"},'"directus_files"'),s(`
}
`)])]),e("h3",{id:"graphql-4"},[s("GraphQL "),e("a",{class:"header-anchor",href:"#graphql-4"},"#")]),e("pre",null,[e("code",{class:""},`POST /graphql/system
`)]),e("pre",null,[e("code",{class:"language-graphql"},[e("span",{class:"hljs-keyword"},"type"),e("span",{class:"hljs-type"}," Mutation"),s(` {
	create_relations_item(data: create_directus_relations_input!): directus_relations
}
`)])]),e("h5",{id:"example-7"},[s("Example "),e("a",{class:"header-anchor",href:"#example-7"},"#")]),e("pre",null,[e("code",{class:"language-graphql"},[e("span",{class:"hljs-keyword"},"mutation"),s(` {
	create_relations_item(
		data: { collection: `),e("span",{class:"hljs-string"},'"articles"'),s(", field: "),e("span",{class:"hljs-string"},'"featured_image"'),s(", related_collection: "),e("span",{class:"hljs-string"},'"directus_files"'),s(` }
	) {
		collection
		field
		related_collection
	}
}
`)])])])],-1),G=e("hr",null,null,-1),C=e("h2",{id:"update-a-relation"},[s("Update a Relation "),e("a",{class:"header-anchor",href:"#update-a-relation"},"#")],-1),I=e("p",null,"Update an existing relation.",-1),B=e("div",{class:"two-up"},[e("div",{class:"left"},[e("h3",{id:"query-parameters-5"},[s("Query Parameters "),e("a",{class:"header-anchor",href:"#query-parameters-5"},"#")]),e("p",null,"Doesn\u2019t support any query parameters."),e("h3",{id:"request-body-2"},[s("Request Body "),e("a",{class:"header-anchor",href:"#request-body-2"},"#")]),e("p",null,[s("A partial "),e("a",{href:"#the-relation-object"},"relation object"),s(".")]),e("h3",{id:"returns-5"},[s("Returns "),e("a",{class:"header-anchor",href:"#returns-5"},"#")]),e("p",null,[s("Returns the "),e("a",{href:"#the-relation-object"},"relation object"),s(" for the created relation.")])]),e("div",{class:"right"},[e("h3",{id:"rest-api-5"},[s("REST API "),e("a",{class:"header-anchor",href:"#rest-api-5"},"#")]),e("pre",null,[e("code",{class:""},`PATCH /relations/:collection/:field
`)]),e("h5",{id:"example-8"},[s("Example "),e("a",{class:"header-anchor",href:"#example-8"},"#")]),e("pre",null,[e("code",{class:"language-json"},[e("span",{class:"hljs-comment"},"// PATCH /relations/articles/author"),s(`

{
	`),e("span",{class:"hljs-attr"},'"meta"'),s(`: {
		`),e("span",{class:"hljs-attr"},'"one_field"'),s(": "),e("span",{class:"hljs-string"},'"articles"'),s(`
	}
}
`)])]),e("h3",{id:"graphql-5"},[s("GraphQL "),e("a",{class:"header-anchor",href:"#graphql-5"},"#")]),e("pre",null,[e("code",{class:""},`POST /graphql/system
`)]),e("pre",null,[e("code",{class:"language-graphql"},[e("span",{class:"hljs-keyword"},"type"),e("span",{class:"hljs-type"}," Mutation"),s(` {
	update_relations_item(collection:`),e("span",{class:"hljs-type"}," String"),s("!, field:"),e("span",{class:"hljs-type"}," String"),s(`!, data: update_directus_relations_input!): directus_relations
}
`)])]),e("h5",{id:"example-9"},[s("Example "),e("a",{class:"header-anchor",href:"#example-9"},"#")]),e("pre",null,[e("code",{class:"language-graphql"},[e("span",{class:"hljs-keyword"},"mutation"),s(` {
	update_relations_item(collection: `),e("span",{class:"hljs-string"},'"articles"'),s(", field: "),e("span",{class:"hljs-string"},'"author"'),s(", data: { meta: { one_field: "),e("span",{class:"hljs-string"},'"articles"'),s(` } }) {
		collection
		field
		related_collection
	}
}
`)])])])],-1),M=e("hr",null,null,-1),U=e("h2",{id:"delete-a-relation"},[s("Delete a Relation "),e("a",{class:"header-anchor",href:"#delete-a-relation"},"#")],-1),W=e("p",null,"Delete an existing relation.",-1),F=e("div",{class:"two-up"},[e("div",{class:"left"},[e("h3",{id:"returns-6"},[s("Returns "),e("a",{class:"header-anchor",href:"#returns-6"},"#")]),e("p",null,"Empty body.")]),e("div",{class:"right"},[e("h3",{id:"rest-api-6"},[s("REST API "),e("a",{class:"header-anchor",href:"#rest-api-6"},"#")]),e("pre",null,[e("code",{class:""},`DELETE /relations/:collection/:field
`)]),e("h5",{id:"example-10"},[s("Example "),e("a",{class:"header-anchor",href:"#example-10"},"#")]),e("pre",null,[e("code",{class:""},`DELETE /relations/articles/author
`)]),e("h3",{id:"graphql-6"},[s("GraphQL "),e("a",{class:"header-anchor",href:"#graphql-6"},"#")]),e("pre",null,[e("code",{class:""},`POST /graphql/system
`)]),e("pre",null,[e("code",{class:"language-graphql"},[e("span",{class:"hljs-keyword"},"type"),e("span",{class:"hljs-type"}," Mutation"),s(` {
	delete_relations_item(collection:`),e("span",{class:"hljs-type"}," String"),s("!, field:"),e("span",{class:"hljs-type"}," String"),s(`!): delete_one
}
`)])]),e("h5",{id:"example-11"},[s("Example "),e("a",{class:"header-anchor",href:"#example-11"},"#")]),e("pre",null,[e("code",{class:"language-graphql"},[e("span",{class:"hljs-keyword"},"mutation"),s(` {
	delete_relations_item(collection: `),e("span",{class:"hljs-string"},'"articles"'),s(", field: "),e("span",{class:"hljs-string"},'"author"'),s(`) {
		collection
		field
	}
}
`)])])])],-1),V={title:"Relations",modularExtension:!1,pageClass:"page-reference"},H={name:"relations",setup(z,{expose:n}){return n({frontmatter:{title:"Relations",modularExtension:!1,pageClass:"page-reference"}}),(J,K)=>{const r=a("router-link"),o=a("docswrapper");return i(),c(o,{frontmatter:V},{default:l(()=>[e("div",d,[e("div",p,[e("div",u,[e("blockquote",null,[e("p",null,[_,h(r,{to:"/docs/getting-started/glossary/#relationships"},{default:l(()=>[g]),_:1}),f])])]),m]),y,j,b,q,v,x,w,T,R,E,k,P,S,L,A,N,Q,D,O,G,C,I,B,M,U,W,F])]),_:1})}}};typeof t=="function"&&t(H);export{H as default,V as frontmatter};
