import{a as l,o as i,b as u,w as n,g as e,e as c,B as t}from"./runtime-core.esm-bundler.b1f35d24.js";var o={};const d={class:"markdown-body"},h=t("This guide explains how to publish a forked version of Directus on NPM, Dockerhub and GHCR. You need to first "),p=t("create a fork"),_=e("div",{class:"warning hint"},[e("div",{class:"hint-title"},"Using a fork in production is neither supported nor recommended."),e("p",null,"Only do so if:"),e("ol",null,[e("li",null,"The feature you want to implement doesn\u2019t satisfy the 80/20 principle"),e("li",null,"There is a technical limitation preventing you from implementing it as an extension")]),e("p",null,"Forks are not officially supported - please don\u2019t submit fork-specific bugs and questions on the official repo."),e("p",null,[t("If you suspect a bug to not be part of your changes please confirm this by reproducing it with the official version "),e("strong",null,"before"),t(" submitting an issue.")])],-1),m=e("div",{class:"tip hint"},[e("div",{class:"hint-title"},"Minimum Requirements"),e("p",null,"If you want to publish your fork to hub.docker.com or NPM you need to have an account there."),e("p",null,"Note: to publish to NPM you probably have to change all the package names. Publishing to NPM should almost never be necessary.")],-1),f=e("h2",{id:"1.-setup-environment-variables%2Fsecrets"},[t("1. Setup environment variables/secrets "),e("a",{class:"header-anchor",href:"#1.-setup-environment-variables%2Fsecrets"},"#")],-1),b=e("h2",{id:"general"},[t("General "),e("a",{class:"header-anchor",href:"#general"},"#")],-1),g=e("table",null,[e("thead",null,[e("tr",null,[e("th",null,"Variable"),e("th",null,"Description"),e("th",null,"Example")])]),e("tbody",null,[e("tr",null,[e("td",null,[e("code",{class:""},"GHCR_IMAGE")]),e("td",null,"Image name for GitHub Container Registry. Be sure to use the full URL."),e("td",null,[e("code",{class:""},"ghcr.io/directus/directus")])]),e("tr",null,[e("td",null,[e("code",{class:""},"DOCKERHUB_IMAGE")]),e("td",null,"Image name for hub.docker.com, no prefix."),e("td",null,[e("code",{class:""},"directus/directus")])])])],-1),y=e("table",null,[e("thead",null,[e("tr",null,[e("th",null,"Secret"),e("th",null,"Description"),e("th",null,"Example")])]),e("tbody",null,[e("tr",null,[e("td",null,[e("code",{class:""},"NPM_TOKEN")]),e("td",null,"Your NPM token. Make sure to use the type \u201Cautomation\u201D."),e("td",null,[e("code",{class:""},"12345678-...")])]),e("tr",null,[e("td",null,[e("code",{class:""},"DOCKERHUB_USERNAME")]),e("td",null,"Dockerhub Username"),e("td",null,[e("code",{class:""},"directus")])]),e("tr",null,[e("td",null,[e("code",{class:""},"DOCKERHUB_PASSWORD")]),e("td",null,"Dockerhub Password"),e("td",null,[e("code",{class:""},"hunter2")])])])],-1),k=e("h2",{id:"2.-create-a-release"},[t("2. Create a release "),e("a",{class:"header-anchor",href:"#2.-create-a-release"},"#")],-1),v=e("pre",null,[e("code",{class:"language-bash"},`npm run release
`)],-1),x={title:"GitHub CI",modularExtension:!1},C={name:"github-ci",setup(E,{expose:s}){return s({frontmatter:{title:"GitHub CI",modularExtension:!1}}),(N,w)=>{const a=l("router-link"),r=l("docswrapper");return i(),u(r,{frontmatter:x},{default:n(()=>[e("div",d,[e("blockquote",null,[e("p",null,[h,c(a,{to:"/docs/contributing/running-locally/"},{default:n(()=>[p]),_:1})])]),_,m,f,b,g,y,k,v])]),_:1})}}};typeof o=="function"&&o(C);export{C as default,x as frontmatter};
