import{a as n,o as c,b as h,w as t,g as s,e as a,B as e}from"./runtime-core.esm-bundler.b1f35d24.js";var r={};const d={class:"markdown-body"},u={class:"two-up"},p={class:"left"},_=e("All data within the platform is private by default. The "),g=e("public role"),f=e(" can be configured to expose data without authentication, or you can pass an access token to the API to access private data."),v=s("div",{class:"right"},[s("p",null,[s("div",{class:"table-of-contents"},[s("ul",null,[s("li",null,[s("a",{href:"#access-tokens"},"Access Tokens")]),s("li",null,[s("a",{href:"#login"},"Login")]),s("li",null,[s("a",{href:"#refresh"},"Refresh")]),s("li",null,[s("a",{href:"#logout"},"Logout")]),s("li",null,[s("a",{href:"#request-password-reset"},"Request Password Reset")]),s("li",null,[s("a",{href:"#reset-a-password"},"Reset a Password")]),s("li",null,[s("a",{href:"#list-auth-providers"},"List Auth Providers")]),s("li",null,[s("a",{href:"#login-using-sso-providers"},"Login Using SSO Providers")])])])])],-1),m=s("hr",null,null,-1),k=s("h2",{id:"access-tokens"},[e("Access Tokens "),s("a",{class:"header-anchor",href:"#access-tokens"},"#")],-1),b=s("div",{class:"two-up"},[s("div",{class:"left"},[s("p",null,"There are two types of tokens that can be used to authenticate within Directus."),s("p",null,[s("strong",null,"Temporary Token (JWT)"),e(" are returned by the "),s("a",{href:"#login"},"login"),e(" endpoint/mutation. These tokens have a relatively short expiration time, and are thus the most secure option to use. The tokens are returned with a "),s("code",{class:""},"refresh_token"),e(" that can be used to retrieve a new access token via the "),s("a",{href:"#refresh"},"refresh"),e(" endpoint/mutation.")]),s("p",null,[s("strong",null,"Static Tokens"),e(" can be set for each platform user, and never expire. They are less secure, but quite useful for server-to-server communication. They are saved as plain-text within "),s("code",{class:""},"directus_users.token"),e(".")]),s("p",null,[e("Once you have your access token, there are two ways to pass it to the API, via the "),s("code",{class:""},"access_token"),e(" query parameter, or in the request\u2019s Authorization Header.")])]),s("div",{class:"right"},[s("h3",{id:"query-parameter"},[e("Query Parameter "),s("a",{class:"header-anchor",href:"#query-parameter"},"#")]),s("pre",null,[s("code",{class:""},`?access_token=<token>
`)]),s("h3",{id:"authorization-header"},[e("Authorization Header "),s("a",{class:"header-anchor",href:"#authorization-header"},"#")]),s("pre",null,[s("code",{class:""},`Authorization: Bearer <token>
`)])])],-1),w=s("hr",null,null,-1),y=s("h2",{id:"login"},[e("Login "),s("a",{class:"header-anchor",href:"#login"},"#")],-1),q=s("p",null,"Retrieve a temporary access token and refresh token.",-1),j={class:"two-up"},T={class:"left"},P=s("h3",{id:"request-body"},[e("Request Body "),s("a",{class:"header-anchor",href:"#request-body"},"#")],-1),S=s("div",{class:"definitions"},[s("p",null,[s("code",{class:""},"email"),e(),s("strong",null,"Required"),s("br"),e(" Email address of the user you\u2019re retrieving the access token for.")]),s("p",null,[s("code",{class:""},"password"),e(),s("strong",null,"Required"),s("br"),e(" Password of the user.")]),s("p",null,[s("code",{class:""},"otp"),s("br"),e(" The user\u2019s one-time-password (if MFA is enabled).")]),s("p",null,[s("code",{class:""},"mode"),s("br"),e(" Whether to retrieve the refresh token in the JSON response, or in a "),s("code",{class:""},"httpOnly"),e(),s("code",{class:""},"secure"),e(" cookie. One of "),s("code",{class:""},"json"),e(", "),s("code",{class:""},"cookie"),e(". Defaults to "),s("code",{class:""},"json"),e(".")])],-1),R=s("h3",{id:"response-attributes"},[e("Response Attributes "),s("a",{class:"header-anchor",href:"#response-attributes"},"#")],-1),O=s("div",{class:"definitions"},[s("p",null,[s("code",{class:""},"access_token"),e(),s("strong",null,"string"),s("br"),e(" Temporary access token to be used in follow-up requests.")]),s("p",null,[s("code",{class:""},"expires"),e(),s("strong",null,"integer"),s("br"),e(" How long before the access token will expire. Value is in milliseconds.")]),s("p",null,[s("code",{class:""},"refresh_token"),e(),s("strong",null,"string"),s("br"),e(" The token that can be used to retrieve a new access token through "),s("a",{href:"#refresh"},[s("code",{class:""},"/auth/refresh")]),e(". Note: if you used "),s("code",{class:""},"cookie"),e(" as the mode in the request, the refresh token won\u2019t be returned in the JSON.")])],-1),A={class:"tip hint"},x=s("div",{class:"hint-title"},"Expiry time",-1),L=e("The token\u2019s expiration time can be configured through "),E=e("the "),B=s("code",{class:""},"ACCESS_TOKEN_TTL",-1),N=e(" environment variable"),I=e("."),G=s("div",{class:"right"},[s("h3",{id:"rest-api"},[e("REST API "),s("a",{class:"header-anchor",href:"#rest-api"},"#")]),s("pre",null,[s("code",{class:""},`POST /auth/login
`)]),s("pre",null,[s("code",{class:""},`POST /auth/login/:provider
`)]),s("pre",null,[s("code",{class:"language-json"},[e(`{
	`),s("span",{class:"hljs-attr"},'"email"'),e(": "),s("span",{class:"hljs-string"},'"admin@example.com"'),e(`,
	`),s("span",{class:"hljs-attr"},'"password"'),e(": "),s("span",{class:"hljs-string"},'"d1r3ct5us"'),e(`
}
`)])]),s("h3",{id:"graphql"},[e("GraphQL "),s("a",{class:"header-anchor",href:"#graphql"},"#")]),s("pre",null,[s("code",{class:""},`POST /graphql/system
`)]),s("pre",null,[s("code",{class:"language-graphql"},[s("span",{class:"hljs-keyword"},"mutation"),e(` {
	auth_login(email: `),s("span",{class:"hljs-string"},'"admin@example.com"'),e(", password: "),s("span",{class:"hljs-string"},'"d1r3ctu5"'),e(`) {
		access_token
		refresh_token
	}
}
`)])])],-1),C=s("hr",null,null,-1),J=s("h2",{id:"refresh"},[e("Refresh "),s("a",{class:"header-anchor",href:"#refresh"},"#")],-1),W=s("p",null,"Retrieve a new access token using a refresh token.",-1),D=s("div",{class:"two-up"},[s("div",{class:"left"},[s("h3",{id:"request-body-2"},[e("Request Body "),s("a",{class:"header-anchor",href:"#request-body-2"},"#")]),s("div",{class:"definitions"},[s("p",null,[s("code",{class:""},"refresh_token"),s("br"),e(" The refresh token to use. If you have the refresh token in a cookie through "),s("a",{href:"#login"},[s("code",{class:""},"/auth/login")]),e(", you don\u2019t have to submit it here.")]),s("p",null,[s("code",{class:""},"mode"),s("br"),e(" Whether to retrieve the refresh token in the JSON response, or in a "),s("code",{class:""},"httpOnly"),e(),s("code",{class:""},"secure"),e(" cookie. One of "),s("code",{class:""},"json"),e(", "),s("code",{class:""},"cookie"),e(". Defaults to "),s("code",{class:""},"json"),e(".")])]),s("h3",{id:"response-attributes-2"},[e("Response Attributes "),s("a",{class:"header-anchor",href:"#response-attributes-2"},"#")]),s("div",{class:"definitions"},[s("p",null,[s("code",{class:""},"access_token"),e(),s("strong",null,"string"),s("br"),e(" Temporary access token to be used in follow-up requests.")]),s("p",null,[s("code",{class:""},"expires"),e(),s("strong",null,"integer"),s("br"),e(" How long before the access token will expire. Value is in milliseconds.")]),s("p",null,[s("code",{class:""},"refresh_token"),e(),s("strong",null,"string"),s("br"),e(" The token that can be used to retrieve a new access token through "),s("a",{href:"#refresh"},[s("code",{class:""},"/auth/refresh")]),e(". Note: if you used "),s("code",{class:""},"cookie"),e(" as the mode in the request, the refresh token won\u2019t be returned in the JSON.")])])]),s("div",{class:"right"},[s("h3",{id:"rest-api-2"},[e("REST API "),s("a",{class:"header-anchor",href:"#rest-api-2"},"#")]),s("pre",null,[s("code",{class:""},`POST /auth/refresh
`)]),s("pre",null,[s("code",{class:"language-json"},[e(`{
	`),s("span",{class:"hljs-attr"},'"refresh_token"'),e(": "),s("span",{class:"hljs-string"},'"gmPd...8wuB"'),e(`
}
`)])]),s("h3",{id:"graphql-2"},[e("GraphQL "),s("a",{class:"header-anchor",href:"#graphql-2"},"#")]),s("pre",null,[s("code",{class:""},`POST /graphql/system
`)]),s("pre",null,[s("code",{class:"language-graphql"},[s("span",{class:"hljs-keyword"},"mutation"),e(` {
	auth_refresh(refresh_token: `),s("span",{class:"hljs-string"},'"abc...def"'),e(", mode: "),s("span",{class:"hljs-string"},'"json"'),e(`) {
		access_token
		refresh_token
	}
}
`)])])])],-1),Q=s("hr",null,null,-1),z=s("h2",{id:"logout"},[e("Logout "),s("a",{class:"header-anchor",href:"#logout"},"#")],-1),H=s("p",null,"Invalidate the refresh token thus destroying the user\u2019s session.",-1),U=s("div",{class:"two-up"},[s("div",{class:"left"},[s("h3",{id:"request-body-3"},[e("Request Body "),s("a",{class:"header-anchor",href:"#request-body-3"},"#")]),s("div",{class:"definitions"},[s("p",null,[s("code",{class:""},"refresh_token"),s("br"),e(" The refresh token to invalidate. If you have the refresh token in a cookie through "),s("a",{href:"#login"},[s("code",{class:""},"/auth/login")]),e(", you don\u2019t have to submit it here.")])])]),s("div",{class:"right"},[s("h3",{id:"rest-api-3"},[e("REST API "),s("a",{class:"header-anchor",href:"#rest-api-3"},"#")]),s("pre",null,[s("code",{class:""},`POST /auth/logout
`)]),s("pre",null,[s("code",{class:"language-json"},[e(`{
	`),s("span",{class:"hljs-attr"},'"refresh_token"'),e(": "),s("span",{class:"hljs-string"},'"gmPd...8wuB"'),e(`
}
`)])]),s("h3",{id:"graphql-3"},[e("GraphQL "),s("a",{class:"header-anchor",href:"#graphql-3"},"#")]),s("pre",null,[s("code",{class:""},`POST /graphql/system
`)]),s("pre",null,[s("code",{class:"language-graphql"},[s("span",{class:"hljs-keyword"},"mutation"),e(` {
	auth_logout(refresh_token: `),s("span",{class:"hljs-string"},'"gmPd...8wuB"'),e(`)
}
`)])])])],-1),V=s("hr",null,null,-1),K=s("h2",{id:"request-password-reset"},[e("Request Password Reset "),s("a",{class:"header-anchor",href:"#request-password-reset"},"#")],-1),F=s("p",null,"Request a password reset email to be sent to the given user.",-1),M={class:"two-up"},Y={class:"left"},X=s("h3",{id:"request-body-4"},[e("Request Body "),s("a",{class:"header-anchor",href:"#request-body-4"},"#")],-1),Z={class:"definitions"},$=s("p",null,[s("code",{class:""},"email"),e(),s("strong",null,"Required"),s("br"),e(" Email address of the user you\u2019re requesting a password reset for.")],-1),ss=s("code",{class:""},"reset_url",-1),es=s("br",null,null,-1),ts=e(" Provide a custom reset url which the link in the email will lead to. The reset token will be passed as a parameter."),os=s("br",null,null,-1),as=s("strong",null,"Note",-1),ns=e(": You need to configure the "),rs=s("code",{class:""},"PASSWORD_RESET_URL_ALLOW_LIST",-1),ls=e(" environment variable"),is=e(" to enable this feature."),cs=s("div",{class:"right"},[s("h3",{id:"rest-api-4"},[e("REST API "),s("a",{class:"header-anchor",href:"#rest-api-4"},"#")]),s("pre",null,[s("code",{class:""},`POST /auth/password/request
`)]),s("pre",null,[s("code",{class:"language-json"},[e(`{
	`),s("span",{class:"hljs-attr"},'"email"'),e(": "),s("span",{class:"hljs-string"},'"admin@example.com"'),e(`
}
`)])]),s("h3",{id:"graphql-4"},[e("GraphQL "),s("a",{class:"header-anchor",href:"#graphql-4"},"#")]),s("pre",null,[s("code",{class:""},`POST /graphql/system
`)]),s("pre",null,[s("code",{class:"language-graphql"},[s("span",{class:"hljs-keyword"},"mutation"),e(` {
	auth_password_request(email: `),s("span",{class:"hljs-string"},'"admin@example.com"'),e(`)
}
`)])])],-1),hs=s("hr",null,null,-1),ds=s("h2",{id:"reset-a-password"},[e("Reset a Password "),s("a",{class:"header-anchor",href:"#reset-a-password"},"#")],-1),us=s("p",null,"The request a password reset endpoint sends an email with a link to the admin app (or a custom route) which in turn uses this endpoint to allow the user to reset their password.",-1),ps=s("div",{class:"two-up"},[s("div",{class:"left"},[s("h3",{id:"request-body-5"},[e("Request Body "),s("a",{class:"header-anchor",href:"#request-body-5"},"#")]),s("div",{class:"definitions"},[s("p",null,[s("code",{class:""},"token"),e(),s("strong",null,"Required"),s("br"),e(" Password reset token, as provided in the email sent by the request endpoint.")]),s("p",null,[s("code",{class:""},"password"),e(),s("strong",null,"Required"),s("br"),e(" New password for the user.")])])]),s("div",{class:"right"},[s("h3",{id:"rest-api-5"},[e("REST API "),s("a",{class:"header-anchor",href:"#rest-api-5"},"#")]),s("pre",null,[s("code",{class:""},`POST /auth/password/reset
`)]),s("pre",null,[s("code",{class:"language-json"},[e(`{
	`),s("span",{class:"hljs-attr"},'"token"'),e(": "),s("span",{class:"hljs-string"},'"eyJh...KmUk"'),e(`,
	`),s("span",{class:"hljs-attr"},'"password"'),e(": "),s("span",{class:"hljs-string"},'"d1r3ctu5"'),e(`
}
`)])]),s("h3",{id:"graphql-5"},[e("GraphQL "),s("a",{class:"header-anchor",href:"#graphql-5"},"#")]),s("pre",null,[s("code",{class:""},`POST /graphql/system
`)]),s("pre",null,[s("code",{class:"language-graphql"},[s("span",{class:"hljs-keyword"},"mutation"),e(` {
	auth_password_reset(token: `),s("span",{class:"hljs-string"},'"eyJh...KmUk"'),e(", password: "),s("span",{class:"hljs-string"},'"d1r3ctu5"'),e(`)
}
`)])])])],-1),_s=s("hr",null,null,-1),gs=s("h2",{id:"list-auth-providers"},[e("List Auth Providers "),s("a",{class:"header-anchor",href:"#list-auth-providers"},"#")],-1),fs=s("p",null,"List all the configured auth providers.",-1),vs={class:"two-up"},ms={class:"left"},ks={class:"tip hint"},bs=s("div",{class:"hint-title"},"Configuring auth providers",-1),ws=e("To learn more about setting up auth providers, see "),ys=e("Configuring auth providers"),qs=e("."),js=s("h3",{id:"response-attributes-3"},[e("Response Attributes "),s("a",{class:"header-anchor",href:"#response-attributes-3"},"#")],-1),Ts=s("div",{class:"definitions"},[s("p",null,[s("code",{class:""},"data"),e(),s("strong",null,"Array"),s("br"),e(" Array of configured auth providers.")]),s("p",null,[s("code",{class:""},"disableDefault"),e(),s("strong",null,"boolean"),s("br"),e(" Whether or not the default authentication provider is disabled.")])],-1),Ps=s("div",{class:"right"},[s("pre",null,[s("code",{class:""},`GET /auth
`)]),s("pre",null,[s("code",{class:"language-json"},[e(`{
	`),s("span",{class:"hljs-attr"},'"data"'),e(`: [
		{
			`),s("span",{class:"hljs-attr"},'"name"'),e(": "),s("span",{class:"hljs-string"},'"GitHub"'),e(`,
			`),s("span",{class:"hljs-attr"},'"driver"'),e(": "),s("span",{class:"hljs-string"},'"oauth2"'),e(`,
			`),s("span",{class:"hljs-attr"},'"icon"'),e(": "),s("span",{class:"hljs-string"},'"github"'),e(`
		},
		{
			`),s("span",{class:"hljs-attr"},'"name"'),e(": "),s("span",{class:"hljs-string"},'"Google"'),e(`,
			`),s("span",{class:"hljs-attr"},'"driver"'),e(": "),s("span",{class:"hljs-string"},'"openid"'),e(`,
			`),s("span",{class:"hljs-attr"},'"icon"'),e(": "),s("span",{class:"hljs-string"},'"google"'),e(`
		},
		{
			`),s("span",{class:"hljs-attr"},'"name"'),e(": "),s("span",{class:"hljs-string"},'"Okta"'),e(`,
			`),s("span",{class:"hljs-attr"},'"driver"'),e(": "),s("span",{class:"hljs-string"},'"openid"'),e(`
		}
	],
	`),s("span",{class:"hljs-attr"},'"disableDefault"'),e(": "),s("span",{class:"hljs-literal"},"false"),e(`
}
`)])])],-1),Ss=s("hr",null,null,-1),Rs=s("h2",{id:"login-using-sso-providers"},[e("Login Using SSO Providers "),s("a",{class:"header-anchor",href:"#login-using-sso-providers"},"#")],-1),Os=s("p",null,"Will redirect to the configured SSO provider for the user to login.",-1),As=s("div",{class:"two-up"},[s("div",{class:"right"},[s("pre",null,[s("code",{class:""},`GET /auth/login/:provider
`)])])],-1),xs=s("hr",null,null,-1),Ls={title:"Authentication",modularExtension:!1,pageClass:"page-reference"},Es={name:"authentication",setup(Bs,{expose:l}){return l({frontmatter:{title:"Authentication",modularExtension:!1,pageClass:"page-reference"}}),(Ns,Is)=>{const o=n("router-link"),i=n("docswrapper");return c(),h(i,{frontmatter:Ls},{default:t(()=>[s("div",d,[s("div",u,[s("div",p,[s("blockquote",null,[s("p",null,[_,a(o,{to:"/docs/configuration/users-roles-permissions/#configure-permissions"},{default:t(()=>[g]),_:1}),f])])]),v]),m,k,b,w,y,q,s("div",j,[s("div",T,[P,S,R,O,s("div",A,[x,s("p",null,[L,a(o,{to:"/docs/configuration/config-options/#general"},{default:t(()=>[E,B,N]),_:1}),I])])]),G]),C,J,W,D,Q,z,H,U,V,K,F,s("div",M,[s("div",Y,[X,s("div",Z,[$,s("p",null,[ss,es,ts,os,as,ns,a(o,{to:"/docs/configuration/config-options/#security"},{default:t(()=>[rs,ls]),_:1}),is])])]),cs]),hs,ds,us,ps,_s,gs,fs,s("div",vs,[s("div",ms,[s("div",ks,[bs,s("p",null,[ws,a(o,{to:"/docs/configuration/config-options/#authentication"},{default:t(()=>[ys]),_:1}),qs])]),js,Ts]),Ps]),Ss,Rs,Os,As,xs])]),_:1})}}};typeof r=="function"&&r(Es);export{Es as default,Ls as frontmatter};
